MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001 ;*******************************************************************************
                      00002 ;                                                                              *
                      00003 ;    Filename: main0                                                           *
                      00004 ;    Date: 06/03/19                                                            *
                      00005 ;    File Version: 1.1.1                                                       *
                      00006 ;    Author: Killtutor                                                         *
                      00007 ;    Company: UCV                                                              *
                      00008 ;    Description: Project for the digitales subject                            *
                      00009 ;                                                                              *
                      00010 ;*******************************************************************************
                      00011 
                      00012 #include "p16f676.inc"
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ; Build date : Jan 21 2019
                      00005 ;  MPASM PIC16F676 processor include
                      00006 ; 
                      00007 ;  (c) Copyright 1999-2019 Microchip Technology, All rights reserved
                      00008 ;==========================================================================
                      00009 
                      00389         LIST
                      00013     
2007   3F94           00014  __CONFIG _FOSC_INTRCIO & _WDTE_OFF & _PWRTE_OFF & _MCLRE_OFF & _BOREN_OFF & _CP_OFF & _CPD_OFF  ;Solo u
                            so el oscilador interno sin salida de reloj, las demas caracteristicas apagadas
                      00015  
                      00016 ;VARIABLE DEFINITION 
                      00017 ;*******************************************************************************
                      00018 
  0000005F            00019 PWMDATA         EQU         5FH     ; DATA QUE MANDA EL USUARIO PWM
  0000005E            00020 T0C             EQU         5EH     ; CONTADAOR PARA EL RELOJ 0
  0000005D            00021 DATO            EQU         5DH     ; DATO MANDADO
  0000005C            00022 BUFFER          EQU         5CH     ;BUFFER REC AND SEND
  0000005B            00023 TEMP            EQU         5BH     ;VARIABLE TEMPORAL
                      00024 ;STOPT0         EQU         5AH     ;VARIABLE PARA SABER SI RECIBIR EL DATO O NO
  00000059            00025 COUNT           EQU         59H     ;CONTADOR
  00000058            00026 W_TEMP          EQU         58H     ; w register for context saving (ACCESS)
  00000057            00027 STATUS_TEMP     EQU         57H     ; status used for context saving
  00000056            00028 BSR_TEMP        EQU         56H     ; bank select used for ISR context saving
  00000055            00029 CUENTA          EQU         55H     ;CONTADOR PARA ENVIAR MENSAJE DE BIENVENIDA
  00000054            00030 SIZE            EQU         54H     ;TAMAÑO DE LA CADENA A MANDAR
                      00031 
                      00032 ;*******************************************************************************
                      00033 ; Reset Vector
                      00034 ;*******************************************************************************
                      00035 
                      00036 RES_VECT  CODE    0x0000            ; processor reset vector
0000   2???           00037     GOTO    START                   ; go to beginning of program
                      00038 
                      00039 ;*******************************************************************************
                      00040 ; INTERRUPT VECTOR
                      00041 ;*******************************************************************************
                      00042 ISR       CODE    0x0004           ; interrupt vector location
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0004   2???           00043     GOTO    INTERRUPT
                      00044 
                      00045 ;SUBRUTINA PARA ESPERAR 1 BAUD O 1/2 BAUD        
0005                  00046 BAUD                           ; A 1200 BAUD EL PERIODO POR BIT ES 833.3 US         
0005   3089           00047     movlw   89h                 ; 1 US   (BAUD RATE CONSTANT)  137'DECIMAL'     
0006   00D9           00048     movwf   COUNT               ; 1 US  MUEVO W A COUNT
0007                  00049 baud1        
0007   0BD9           00050     decfsz  COUNT,1             ; 1 US (+ 1 US MORE IF SKIP)   CUENTO HASTA 137     
0008   2???           00051     goto    baud1               ; 2 US REGRESO A BAUD1 (CICLO)                               
                      00052                                 ; SE ACABA LUEGO DE 1+1+1+1+3x137+1 = 416 US 
0009                  00053 HALFBAUD                        ;       AQUI REPITO TODO OTRA VEZ.. PARA EL MEDIO BAUD FALTANTE
0009   3089           00054     movlw   89h                 ; 1 US        ASI LOS PUEDO DIVIDIR EN 1 BAUD Y 1/2 BAUD
000A   00D9           00055     movwf   COUNT               ; 1 US
000B                  00056 hbaud1        
000B   0BD9           00057     decfsz  COUNT,F             ; 1 US (+ 1 US MORE IF SKIP)       
000C   2???           00058     goto    hbaud1              ; 2 US        
000D   0008           00059     RETURN                      ; SALGO LUEGO DE 1+1+1+1+3x137+1 = 416 US  (TOTAL=832 US O 416 US)
                      00060        
                      00061 ;SUBRUTINA INTERRUPCION TIMER 1 (MASTER PWM) FRECUENCIA SEÑAL PWM 61HZ CADA 16.4MS ENCINDO EL LED
000E                  00062 T1INT
000E   1605           00063     BSF     PORTA, 4                ;PRENDO EL LED (PWM)
000F   1010           00064     BCF     T1CON,0                 ;PARO TIMER1
0010   3006           00065     MOVLW   06H                             ;W=6 (TOMANDO EN CUENTA LOS CICLOS Q ESTA SIN CONTAR)
0011   008E           00066     MOVWF   TMR1L                           ;TMR1L=W=0
0012   30C0           00067     MOVLW   0C0H                                    ;W=C0H=01000000
0013   008F           00068     MOVWF   TMR1H                           ;TMR1H=W=01000000
0014   1410           00069     BSF     T1CON, 0                ;ARRANCO TIMER1 DE NUEVO
0015   085F           00070     MOVF    PWMDATA, 0              ;W=PWMDATA PARA METERSELO AL CONTADOR DEL T0
0016   3E01           00071     ADDLW   01H                     ;AÑADO 1 PUESTO Q LO PRIMERO Q HAGO ES RESTAR 
0017   00DE           00072     MOVWF   T0C                     ;METO W AL CONTADOR DE T0
0018   0181           00073     CLRF    TMR0
0019   100C           00074     BCF     PIR1, 0                 ;RESETEO EL BIT DE INTERRUPCION TIMER1
001A   2???           00075     GOTO    LISTO                   ;REGRESO AL FINAL DE LA INTERRUPCION
                      00076     
                      00077 ;SUBRUTINA INTERRUPCION TIMER 0 (SLAVE DUTYCYCLE) SE EJECUTA CADA 64US    
                      00078 ;CADA 64US DISMINUYO T0C <0-255>  Y CUANDO LLEGO A 0 APGO EL LED DELAY DE 2US
001B                  00079 T0INT
001B   0181           00080     CLRF    TMR0
001C   0BDE           00081     DECFSZ  T0C, 1                  ;DIMINUYO T0C SALTO SI ES 0 EL RESULTADO 1US +1 SI SALTA
001D   2???           00082     GOTO    LISTO                   ;yA DECREMENTE T0C AS Q ME VOY AL FINAL DE LA INTERRUPCION 
001E   1205           00083     BCF     PORTA, 4                ;APAGO EL LED (PWM) (MIN=66US)--> ENCINDE POR 66US CON DUTYCYCLE EN 
                            0%
001F   110B           00084     BCF     INTCON, 2               ;RESETEO EL BIT DE INTERRUPCION TIMERO
0020   2???           00085     GOTO    LISTO                   ;REGRESO AL FINAL DE LA INTERRUPCION
                      00086     
                      00087 ; SUBRUTINA QUE RECIBE SERIAL
0021                  00088 RECEIVE
0021   138B           00089     BCF         INTCON,7            ;DESHABILITO LAS INTERRUPCIONES GENERALES 
0022   130B           00090     BCF         INTCON,6            ;DESHABILITO LAS INTERRUPCIONES PERIFERICAS
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0023   1116           00091     BCF         IOCA, 2             ;DESHABILITO INTERRUPCIONES PUERTO A
0024                  00092 RE0
0024   1905           00093     BTFSC       PORTA, 2            ;SALTO EL BIT DE START
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0025   2???           00094     GOTO        RE0                 ;SINO SIGO ESPERANDO EL BIT DE START
0026   3008           00095     MOVLW       08H                 ; QUIERO RECIBIR 8 BITS
0027   00DB           00096     MOVWF       TEMP                ;TEMP = 8 Ó 1000
0028   01DC           00097     CLRF        BUFFER              ;LIMPIO EL REGISTRO BUFFER
0029   2???           00098     CALL        HALFBAUD            ;ESPERO MEDIO CICLO
002A   1905           00099     BTFSC       PORTA, 2            ;SALTO SI SIGO ESTANDO EN EL BIT DE START
002B   2???           00100     GOTO        RE0                 ;FUE UN SPIKE ASI Q SIGO ESPERANDO EL BIT DE START
002C                  00101 RE1
002C   2???           00102     CALL        BAUD                ;SUPONIENDO  SIGO N EL BIT START ESPERO UN CICLO PARA LEER EL SIGUIN
                            TE BIT
002D   1003           00103     BCF         STATUS, 0           ; LIMPIO EL CARRY BIT
002E   0CDC           00104     RRF         BUFFER, 1           ;ROTO MSB LE METO EL CARRY(0) EN EL LSB
002F   1905           00105     BTFSC       PORTA,2             ;eL PUERTO ESTA EN 0?
0030   17DC           00106     BSF         BUFFER,7            ;NO, METO EN EL ULTIMO BIT UN 1 
0031   0BDB           00107     DECFSZ      TEMP, 1             ;YA TENGO LOS 8BITS?
0032   2???           00108     GOTO        RE1                 ;NO, TODAVI NO LOS TIENES SIGUE RECIBIENDO
0033   2???           00109     CALL        BAUD                ;ESPERO UN BAUD ESPERANDO EL BIT DE PARADA  
0034   085C           00110     MOVF        BUFFER, 0           ;METO BUFFER EN W
0035   2???           00111     CALL        SEND
0036   085C           00112     MOVF        BUFFER,0
                      00113     ;BSF                INTCON, 7           ;RESTABLEZCO LAS INTERRUPCIONES GENERALES
                      00114     ;BSF                INTCON, 6           ;RESTABLEZCO LAS INTERRUPCIONES PERIFERICAS
                      00115     ;BSF                IOCA, 2             ;DESHABILITO INTERRUPCIONES PUERTO A
0037   2???           00116     GOTO        INTLIST             ;LISTA LA INTERRUPCION YA RECIBÍ LA INSTRUCCION
                      00117     
0038                  00118 RECEIVED
                      00119     
0038                  00120 RE0D
0038   1905           00121     BTFSC       PORTA, 2            ;SALTO EL BIT DE START
0039   2???           00122     GOTO        RE0D                ;SINO SIGO ESPERANDO EL BIT DE START
003A   3008           00123     MOVLW       08H                 ; QUIERO RECIBIR 8 BITS
003B   00DB           00124     MOVWF       TEMP                ;TEMP = 8 Ó 1000
003C   01DC           00125     CLRF        BUFFER              ;LIMPIO EL REGISTRO BUFFER
003D   2???           00126     CALL        HALFBAUD            ;ESPERO MEDIO CICLO
003E   1905           00127     BTFSC       PORTA, 2            ;SALTO SI SIGO ESTANDO EN EL BIT DE START
003F   2???           00128     GOTO        RE0D                ;FUE UN SPIKE ASI Q SIGO ESPERANDO EL BIT DE START
0040                  00129 RE1D
0040   2???           00130     CALL        BAUD                ;SUPONIENDO  SIGO N EL BIT START ESPERO UN CICLO PARA LEER EL SIGUIN
                            TE BIT
0041   1003           00131     BCF         STATUS, 0           ; LIMPIO EL CARRY BIT
0042   0CDC           00132     RRF         BUFFER, 1           ;ROTO MSB LE METO EL CARRY(0) EN EL LSB
0043   1905           00133     BTFSC       PORTA,2             ;eL PUERTO ESTA EN 0?
0044   17DC           00134     BSF         BUFFER,7            ;NO, METO EN EL ULTIMO BIT UN 1 
0045   0BDB           00135     DECFSZ      TEMP, 1             ;YA TENGO LOS 8BITS?
0046   2???           00136     GOTO        RE1D                ;NO, TODAVI NO LOS TIENES SIGUE RECIBIENDO
0047   2???           00137     CALL        BAUD                ;ESPERO UN BAUD ESPERANDO EL BIT DE PARADA  
0048   085C           00138     MOVF        BUFFER, 0           ;METO BUFFER EN W
0049   0008           00139     RETURN
                      00140     
                      00141 ;SUBRUTINA QUE ENVIA SERIAL
004A                  00142 SEND
004A   138B           00143    BCF          INTCON,7
004B   130B           00144    BCF          INTCON,6
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

004C   00DC           00145     MOVWF       BUFFER              ;BUFFER=W EN 2 LLEVARE EL CONTADOR
004D   3008           00146     MOVLW       08H                 ;W=8
004E   00DB           00147     MOVWF       TEMP                ;TEMP=W
004F   1085           00148     BCF         PORTA, 1            ;BIT DE START
0050   2???           00149     CALL        BAUD                ;ESPERO 1 BAUD
0051                  00150 S1
0051   0CDC           00151     RRF         BUFFER, 1           ;ROTO Y GUARDO EN BUFFER
0052   1C03           00152     BTFSS       STATUS, 0           ;PRUEBO SI CARRY ES 1
0053   1085           00153     BCF         PORTA, 1            ;SI ES CERO MANDO 0
0054   1803           00154     BTFSC       STATUS, 0           ;PRUEBO SI ES 0 EL CARRY
0055   1485           00155     BSF         PORTA, 1            ;SI ES UNO MANDO 1
0056   0805           00156     MOVF        PORTA, 0                ;W=PÒRTA
0057   2???           00157     CALL        BAUD                ;ESPERO 1 BAUD
0058   0BDB           00158     DECFSZ      TEMP, 1             ;VOY DISMINUYENDO TEMP
0059   2???           00159     GOTO        S1                  ;MIENTRAS NO SEA 0 SIGO ENVIANDO
                      00160     ;RRF                BUFFER, 1           ;DEVUELVO EL BUFFER AL ORIGINAL
005A   1485           00161     BSF         PORTA, 1            ;BIT DE STOP
005B   2???           00162     CALL        BAUD                ;BAUD 1
                      00163     ;CALL       BAUD                ;BAUD 2
005C   178B           00164    BSF          INTCON,7
005D   170B           00165    BSF          INTCON,6
005E   3400           00166     RETLW       0                   ;REGRESO CON W EN CERO 
                      00167     
005F                  00168 INTERRUPT
                      00169     ;GUARDO W Y STATUS PORSIACA
005F   00D8           00170     MOVWF  W_TEMP                   ;copy W to temp register, could be in either bank
0060   0E03           00171     SWAPF  STATUS,0                 ;swap status to be saved into W
0061   1283           00172     BCF    STATUS,5                 ;change to bank 0 regardless of current bank
0062   00D7           00173     MOVWF  STATUS_TEMP              ;save status to bank 0 register
0063   138B           00174     BCF         INTCON,7            ;DESHABILITO LAS INTERRUPCIONES GENERALES 
0064   130B           00175     BCF         INTCON,6            ;DESHABILITO LAS INTERRUPCIONES PERIFERICAS
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0065   1116           00176     BCF         IOCA, 2             ;DESHABILITO INTERRUPCIONES PUERTO A
                      00177 
                      00178     ;COMIENZA LA INTERRUPCIÓN
0066   180C           00179     BTFSC   PIR1,0              ;PRUEBO SI FUE EL TIMER1 EL QUE SE DESBORDO
0067   2???           00180     GOTO    T1INT               ;SI ES TIMER1 ME VOY A LA FUNCION DE TIMER 1
0068   190B           00181     BTFSC   INTCON,2            ;PRUEBO A VER SI FUE TIMER 0 QUE SE DESBORDO
0069   2???           00182     GOTO    T0INT               ;LLAMO A LA RUTINA DE TIMER0
006A   180B           00183     BTFSC   INTCON, 0           ;PRUEBO SI LA INTERRUPCION FUE DEL PORTA
006B   2???           00184     GOTO    RECEIVE             ;LLAMO A LA RUTINA DEL RECEPTOR
006C   1B0C           00185     BTFSC   PIR1, 6             ;VERIFICO SI FUE EL ADC
006D   2???           00186     GOTO    FOUR1               ;MANEJO LA CONVERSION
                      00187     
006E                  00188 LISTO
006E   178B           00189     BSF         INTCON, 7           ;RESTABLEZCO LAS INTERRUPCIONES GENERALES
006F   170B           00190     BSF         INTCON, 6           ;RESTABLEZCO LAS INTERRUPCIONES PERIFERICAS
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0070   1516           00191     BSF         IOCA, 2             ;RESTABLEZCO INTERRUPCIONES PUERTO A
                      00192      ;RESTAURO W Y STATUS
0071   0E57           00193     SWAPF  STATUS_TEMP,0 ;sWap STATUS_TEMP register into W, sets bank to original state
0072   0083           00194     MOVWF  STATUS           ;move W into STATUS register
0073   0ED8           00195     SWAPF  W_TEMP,1         ;swap W_TEMP
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0074   0E58           00196     SWAPF  W_TEMP,0         ;swap W_TEMP into W
0075   0009           00197     RETFIE
                      00198  
0076                  00199 ONE 
0076   3001           00200     MOVLW   01H                     ; W = 0000001
0077   1D85           00201     BTFSS   PORTA, 3                ; Si RA3 es 1 salta (w=0000001) SINO W=0000000
0078   3000           00202     MOVLW   00H                     ; W = 0000000
0079   2???           00203     CALL    SEND                    ; ENVIO W A LA CONSOLA      
007A   2???           00204     GOTO    LISTO
                      00205     
007B                  00206 TWO
007B   2???           00207     CALL    RECEIVED                ; RECIBO EL DATO 
007C   00DD           00208     MOVWF   DATO                        ; LO que este en w lo meto en dato
007D   1685           00209     BSF     PORTA, 5                ; RA5 LO PONGO EN 1 (PRENDE EL LED)
007E   1C5D           00210     BTFSS   DATO, 0                 ; SI lsb of dato es 1 salta sino sigue
007F   1285           00211     BCF     PORTA, 5                ; RA5 LO PONGO EN 0 (APAGO EL LED)
0080   2???           00212     GOTO    LISTO
                      00213     
0081                  00214 TREE
0081   2???           00215     CALL    RECEIVED                ; RECIBO EL DATO 
0082   00DF           00216     MOVWF   PWMDATA                 ; METO EL DATO Q RECIBI A PWMDATA
0083   2???           00217     GOTO    LISTO                   ; WAITING INSTRUCTIONS
                      00218     
0084                  00219 FOUR0
0084   149F           00220     BSF     ADCON0, 1               ; EMPIEZO LA CONVERSION ADC PAPAS Y LISTO!
0085   2???           00221     GOTO    LISTO                   ;MIENTRAS CONVIERTO RECIBO DATA PORSIACA
0086                  00222 FOUR1
0086   1683           00223     BSF     STATUS, 5               ;MUEVO AL BANCO 1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0087   009E           00224     MOVWF   ADRESL                  ;RESULTADO ADC A W
0088   2???           00225     CALL    SEND                    ;ENVIO A LA CONSOLA
0089   130C           00226     BCF     PIR1, 6                 ;RESETEO LAS INTERRUPCIONES DEL ADC
008A   2???           00227     GOTO    LISTO
                      00228     
                      00229     
                      00230 ;SUBRUTINA QUE DECIDE QUE COSA HACER LUEGO DE RECIBIR DATA
008B                  00231 INTLIST
008B   3C01           00232     SUBLW   01H                     ;RESTO 1 A W PARA VER SI ES ESTA
008C   1903           00233     BTFSC   STATUS, 2               ;ES CERO? Z=1 ?
008D   2???           00234     GOTO    ONE                     ;SI ES CERO INSTRUCTION 1
008E   3E01           00235     ADDLW   01H                     ; LE DEVUELVO LO Q LE QUITE
008F   3C02           00236     SUBLW   02H                     ; RESTO 2 A W
0090   1903           00237     BTFSC   STATUS, 2               ;ES CERO? Z=1 ?
0091   2???           00238     GOTO    TWO                     ; SI, ES 0 FUNCTION 2
0092   3E02           00239     ADDLW   02H                     ; LE DEVUELVO LO Q LE QUITE
0093   3C03           00240     SUBLW   03H                     ; RESTO 3
0094   1903           00241     BTFSC   STATUS, 2               ; ES CERO? Z=1 ?
0095   2???           00242     GOTO    TREE                    ; SI, ES 0 FUNCTION 2
0096   3E03           00243     ADDLW   03H                     ; LE DEVUELVO LO QUE LE QUITE
0097   3C11           00244     SUBLW   11H                     ; RESTO 11H
0098   1903           00245     BTFSC   STATUS, 2               ; ES CERO? Z=1 ?
0099   2???           00246     GOTO    FOUR0                   ; SI, ES 0 FUNCTION 2
009A   2???           00247     GOTO    LISTO                   ; CICLO INFINITO
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00248 
                      00249 ;*******************************************************************************
                      00250 ; MAIN PROGRAM
                      00251 ;*******************************************************************************
                      00252 
                      00253 MAIN_PROG CODE                      ; let linker place main program
                      00254 
                      00255 ;BIENVENIDA OFICIAL
0000   0782           00256 GUERCOME        addwf PCL,1             ;suma la posición del elemento a la del PC
0001   3442           00257         retlw 0x42              ;retorna en w el código ASCII de la B
0002   3469           00258         retlw 0x69              ;retorna en w el código ASCII de la I
0003   3465           00259         retlw 0x65              ;retorna en w el código ASCII de la E
0004   346E           00260         retlw 0x6E              ;retorna en w el código ASCII de la N  
0005   3476           00261         retlw 0x76              ;retorna en w el código ASCII de la V
0006   3465           00262         retlw 0x65              ;retorna en w el código ASCII de la E
0007   346E           00263         retlw 0x6E              ;retorna en w el código ASCII de la N
0008   3469           00264         retlw 0x69              ;retorna en w el código ASCII de la I
0009   3464           00265         retlw 0x64              ;retorna en w el código ASCII de la D
000A   346F           00266         retlw 0x6F              ;retorna en w el código ASCII de la O
000B   3473           00267         retlw 0x73              ;retorna en w el código ASCII de la S
000C   340D           00268         retlw 0x0D              ;retorna en w el código ASCII de la CR  
                      00269 ;ESPERO INSTRUCCION
000D   0782           00270 ESPERAI         addwf PCL,1             ;suma la posición del elemento a la del PC
000E   3445           00271         retlw 0x45              ;retorna en w el código ASCII de la E
000F   3473           00272         retlw 0x73              ;retorna en w el código ASCII de la S
0010   3470           00273         retlw 0x70              ;retorna en w el código ASCII de la P
0011   3465           00274         retlw 0x65              ;retorna en w el código ASCII de la E  
0012   3472           00275         retlw 0x72              ;retorna en w el código ASCII de la R
0013   346F           00276         retlw 0x6F              ;retorna en w el código ASCII de la O
0014   3420           00277         retlw 0x20              ;retorna en w el código ASCII de la SPACE
0015   3449           00278         retlw 0x49              ;retorna en w el código ASCII de la I
0016   344E           00279         retlw 0x4E              ;retorna en w el código ASCII de la N
0017   3453           00280         retlw 0x53              ;retorna en w el código ASCII de la S
0018   343A           00281         retlw 0x3A              ;retorna en w el código ASCII de la :
0019   3420           00282         retlw 0x20              ;retorna en w el código ASCII de la CR  
                      00283 ;ESPERO DATO STRING     
001A   0782           00284 ESPERAD         addwf PCL,1             ;suma la posición del elemento a la del PC
001B   3445           00285         retlw 0x45              ;retorna en w el código ASCII de la E
001C   3473           00286         retlw 0x73              ;retorna en w el código ASCII de la S
001D   3470           00287         retlw 0x70              ;retorna en w el código ASCII de la P
001E   3465           00288         retlw 0x65              ;retorna en w el código ASCII de la E  
001F   3472           00289         retlw 0x72              ;retorna en w el código ASCII de la R
0020   346F           00290         retlw 0x6F              ;retorna en w el código ASCII de la O
0021   3420           00291         retlw 0x20              ;retorna en w el código ASCII de la SPACE
0022   3444           00292         retlw 0x44              ;retorna en w el código ASCII de la D
0023   3441           00293         retlw 0x41              ;retorna en w el código ASCII de la A
0024   3454           00294         retlw 0x54              ;retorna en w el código ASCII de la T
0025   344F           00295         retlw 0x4F              ;retorna en w el código ASCII de la :
0026   343A           00296         retlw 0x3A              ;retorna en w el código ASCII de la CR  
                      00297         
0027                  00298 START;VERIFICADO TODO.. LISTO PAPU
                      00299     ;LIMPIANDO TODO vERIFICADO, FUNCIONA AL PELO
                      00300     ;CLRF    STOPT0     
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0027   1283           00301     BCF     STATUS, 5               ; BANK0
0028   0185           00302     CLRF    PORTA                   ;LIMPIO PUERTOA
0029   0187           00303     CLRF    PORTC                   ;LIMPIO PUERTO C
002A   1683           00304     BSF     STATUS, 5               ;BANK1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002B   0185           00305     CLRF    TRISA                   ;LIMPIO CONFIG PORTA
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002C   0187           00306     CLRF    TRISC                   ;LIMPIO CONFIG PORTC
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002D   0191           00307     CLRF    ANSEL                   ;LIMPIO ANSEL REGISTRO
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
002E   0196           00308     CLRF    IOCA                    ;INTERRUPCIONES EN PUERTO
002F   1283           00309     BCF     STATUS, 5               ;BANK0
                      00310     
                      00311     ;Configurando ADC  --vERIFICADO, FUNCIONA PEPA
0030   179F           00312     BSF     ADCON0, 7               ; CONFIGURANDO ADC JUSTIFICADO DERECHA
0031   1683           00313     BSF     STATUS, 5               ; BANK1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0032   171F           00314     BSF     ADCON1, 6               ; CONFIGURANDO ADC 4TOSC
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0033   1411           00315     BSF     ANSEL, 0                ; CONFIGURANDO PIN ADC A CONVERTIR
                      00316     
                      00317     
                      00318     ;CONFIGURANDO INTERRUPCIONES
0034   30F8           00319     MOVLW   0f8h                                    ;ACTIVO TODAS LAS INTERRUPCIONES
0035   008B           00320     MOVWF   INTCON                          ;CON ESTA CONFIG 11111000
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0036   140C           00321     BSF     PIE1,0                          ; ENABLES TIMER1 INTERRUPTS
0037   30C5           00322     MOVLW   B'11000101'
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0038   0081           00323     MOVWF   OPTION_REG
0039   1283           00324     BCF     STATUS, 5                       ; BANK0
003A   3000           00325     MOVLW   00H                             ;W=0
003B   008E           00326     MOVWF   TMR1L                           ;TMR1L=W=0
003C   30C0           00327     MOVLW   0C0H                                    ;W=40H=01000000
003D   008F           00328     MOVWF   TMR1H                           ;TMR1H=W=01000000
003E   300D           00329     MOVLW   0DH                             ;00001111 T1CON CONFIG
003F   0090           00330     MOVWF   T1CON                           ;CONFIGURO T1
                      00331     
                      00332     
                      00333     ;CONFIGURACION DE PUERTOS
0040   1683           00334     BSF     STATUS, 5               ; BANK1
0041   300D           00335     MOVLW   0dh                     ; Configurando TRISA para O, O, I, I, O, I
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0042   0085           00336     MOVWF   TRISA                   ; Metiendo la configuración del TRISA desde W
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
0043   1516           00337     BSF     IOCA , 2                ;INTERRUPCIONES EN EL PUERTO A2 MANAO
0044   1283           00338     BCF     STATUS, 5                       ; BANK0
                      00339     ;LIMPIANDO COSAS
0045   30FF           00340     MOVLW   0FFH                    ; W= 000111B DUTY CYCLE A LA MITAD
0046   00DF           00341     MOVWF   PWMDATA                 ; PWMDATA=W
0047   1485           00342     BSF     PORTA, 1                ; tx a 1
                      00343     
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00344 ;BIENVENIDOS MESSAGE  
0048   300C           00345     MOVLW   0CH                     ;W=12
0049   00D4           00346     MOVWF   SIZE                    ;SIZE=W
004A   3000           00347     MOVLW   00H                     ;W=0
004B   00D5           00348     MOVWF   CUENTA                  ;CUENTA=W
004C                  00349 BIENVENIDA    
004C   00D5           00350     MOVWF   CUENTA                  ;CUENTA=W
004D   2???           00351     CALL    GUERCOME                ;OBTENGO EL CARACTER
004E   2???           00352     CALL    SEND                    ;LO ENVIO
004F   0855           00353     MOVF    CUENTA, 0               ;W=CUENTA
0050   3E01           00354     ADDLW   01H                     ;W=W+1
0051   0BD4           00355     DECFSZ  SIZE, 1                 ;SIZE=SIZE-1 SALTA CUANDO LLEGA A 0
0052   2???           00356     GOTO    BIENVENIDA
                      00357 ;ESPERO INS MESSAGE   
0053   300B           00358     MOVLW   0BH                     ;W=11
0054   00D4           00359     MOVWF   SIZE                    ;SIZE=W
0055   3000           00360     MOVLW   00H                     ;W=1
0056   00D5           00361     MOVWF   CUENTA                  ;CUENTA=W
0057                  00362 BIENVENIDA2    
0057   00D5           00363     MOVWF   CUENTA                  ;CUENTA=W
0058   2???           00364     CALL    ESPERAI                 ;OBTENGO EL CARACTER
0059   2???           00365     CALL    SEND                    ;LO ENVIO
005A   0855           00366     MOVF    CUENTA, 0               ;W=CUENTA
005B   3E01           00367     ADDLW   01H                     ;W=W+1    
005C   0BD4           00368     DECFSZ  SIZE, 1                 ;SIZE=SIZE-1 SALTA CUANDO LLEGA A 0
005D   2???           00369     GOTO    BIENVENIDA2
                      00370 
005E   2???           00371     GOTO    $                       ;LOOP FOREVER lml
                      00372 
3F94                  00373     END
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE  9


SYMBOL TABLE
  LABEL                             VALUE 

ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000004
ADCS1                             00000005
ADCS2                             00000006
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
ANS0                              00000000
ANS1                              00000001
ANS2                              00000002
ANS3                              00000003
ANS4                              00000004
ANS5                              00000005
ANS6                              00000006
ANS7                              00000007
ANSEL                             00000091
BAUD                              00000005
BIENVENIDA                        0000004C
BIENVENIDA2                       00000057
BSR_TEMP                          00000056
BUFFER                            0000005C
C                                 00000000
CAL0                              00000002
CAL1                              00000003
CAL2                              00000004
CAL3                              00000005
CAL4                              00000006
CAL5                              00000007
CHS0                              00000002
CHS1                              00000003
CHS2                              00000004
CINV                              00000004
CIS                               00000003
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             00000019
CMIE                              00000003
CMIF                              00000003
COUNT                             00000059
COUT                              00000006
CUENTA                            00000055
DATO                              0000005D
DC                                00000001
EEADR                             0000009B
EECON1                            0000009C
EECON2                            0000009D
EEDAT                             0000009A
EEDATA                            0000009A
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE 10


SYMBOL TABLE
  LABEL                             VALUE 

EEIE                              00000007
EEIF                              00000007
ESPERAD                           0000001A
ESPERAI                           0000000D
F                                 00000001
FOUR0                             00000084
FOUR1                             00000086
FSR                               00000004
GIE                               00000007
GO                                00000001
GO_DONE                           00000001
GO_NOT_DONE                       00000001
GUERCOME                          00000000
HALFBAUD                          00000009
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTERRUPT                         0000005F
INTF                              00000001
INTLIST                           0000008B
IOC                               00000096
IOCA                              00000096
IOCA0                             00000000
IOCA1                             00000001
IOCA2                             00000002
IOCA3                             00000003
IOCA4                             00000004
IOCA5                             00000005
IRP                               00000007
LISTO                             0000006E
NOT_BOD                           00000000
NOT_BOR                           00000000
NOT_DONE                          00000001
NOT_GPPU                          00000007
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RAPU                          00000007
NOT_T1SYNC                        00000002
NOT_TO                            00000004
ONE                               00000076
OPTION_REG                        00000081
OSCCAL                            00000090
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PIE1                              0000008C
PIR1                              0000000C
PORTA                             00000005
PORTC                             00000007
PS0                               00000000
PS1                               00000001
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE 11


SYMBOL TABLE
  LABEL                             VALUE 

PS2                               00000002
PSA                               00000003
PWMDATA                           0000005F
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RAIE                              00000003
RAIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RD                                00000000
RE0                               00000024
RE0D                              00000038
RE1                               0000002C
RE1D                              00000040
RECEIVE                           00000021
RECEIVED                          00000038
RP0                               00000005
RP1                               00000006
S1                                00000051
SEND                              0000004A
SIZE                              00000054
START                             00000027
STATUS                            00000003
STATUS_TEMP                       00000057
T0C                               0000005E
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0INT                             0000001B
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1IE                              00000000
T1IF                              00000000
T1INT                             0000000E
T1OSCEN                           00000003
TEMP                              0000005B
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1GE                            00000006
TMR1H                             0000000F
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE 12


SYMBOL TABLE
  LABEL                             VALUE 

TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TREE                              00000081
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TWO                               0000007B
VCFG                              00000006
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             00000099
VREN                              00000007
VRR                               00000005
W                                 00000000
WPU                               00000095
WPUA                              00000095
WPUA0                             00000000
WPUA1                             00000001
WPUA2                             00000002
WPUA4                             00000004
WPUA5                             00000005
WR                                00000001
WREN                              00000002
WRERR                             00000003
W_TEMP                            00000058
Z                                 00000002
_BODEN                            00003FFF
_BODEN_OFF                        00003FBF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CP                               00003F7F
_CPD                              00003EFF
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_OFF                           00003FFF
_CP_ON                            00003F7F
_DEVID1                           00002006
MPASM 5.83  /HOME/KILLTUTOR/MPLABXPROJECTS/D   3-20-2019  17:31:11         PAGE 13


SYMBOL TABLE
  LABEL                             VALUE 

_EC_OSC                           00003FFB
_EXTRC_OSC_CLKOUT                 00003FFF
_EXTRC_OSC_NOCLKOUT               00003FFE
_FOSC_EC                          00003FFB
_FOSC_EXTRCCLK                    00003FFF
_FOSC_EXTRCIO                     00003FFE
_FOSC_HS                          00003FFA
_FOSC_INTRCCLK                    00003FFD
_FOSC_INTRCIO                     00003FFC
_FOSC_LP                          00003FF8
_FOSC_XT                          00003FF9
_HS_OSC                           00003FFA
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_INTRC_OSC_CLKOUT                 00003FFD
_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FF8
_MAIN_PROG_005E                   0000005E
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FEF
_WDTE_OFF                         00003FF7
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FF7
_WDT_ON                           00003FFF
_XT_OSC                           00003FF9
__16F676                          00000001
baud1                             00000007
hbaud1                            0000000B

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :    14 reported,     0 suppressed

